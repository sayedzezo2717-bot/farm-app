# ๐ ุฏููู ุชุทุจูู ุฅุฏุงุฑุฉ ูุฒุฑุนุฉ ุงูุฏูุงุฌู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชุทุจูู ููุจุงูู ูุชุฎุตุต ูุฅุฏุงุฑุฉ ูุฒุงุฑุน ุงูุฏูุงุฌู ุงููุฎุชูุทุฉ (ูุญู + ุจูุถ) ูุจูู ุจู **Flutter**. ูุฏุนู ููุนู ุฅูุชุงุฌ ูุฎุชูููู ุจุฎูุงุฑุฒููุงุช ุชุชููู ูุน ูู ููุน.

---

## ๐๏ธ ุงููุนูุงุฑูุฉ ุงูุนุงูุฉ

```
โโโ models.dart                  # ููุงุฐุฌ ุงูุจูุงูุงุช
โโโ local_storage_service.dart   # ุฎุฏูุฉ ุงูุชุฎุฒูู ุงููุญูู
โโโ batch_setup_screen.dart      # ุตูุญุฉ ุฅุนุฏุงุฏ ุงูุฏูุฑุฉ
โโโ dashboard_screen.dart        # ููุญุงุช ุงูุชุญูู ุงููุชุฎุตุตุฉ
โโโ main.dart                    # ููุทุฉ ุงูุฏุฎูู ูุงูุฅุนุฏุงุฏุงุช
โโโ pubspec.yaml                # ุงูููุชุจุงุช ูุงูุฅุนุฏุงุฏุงุช
```

### ุงููุนูุงุฑูุฉ ุงูุทุจููุฉ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   UI Layer (ุงููุงุฌูุงุช)          โ
โ - BatchSetupScreen              โ
โ - DashboardScreen               โ
โ - DailyRecordScreen (ูุฑูุจุงู)   โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
               โ
โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโ
โ   Services Layer (ุงูุฎุฏูุงุช)      โ
โ - LocalStorageService           โ
โ - AnalyticsService (ูุฑูุจุงู)    โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
               โ
โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโ
โ   Data Layer (ูุงุนุฏุฉ ุงูุจูุงูุงุช)   โ
โ - Hive (local)                  โ
โ - SharedPreferences             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ููุงุฐุฌ ุงูุจูุงูุงุช

### 1. **Breed (ุงูุณูุงูุฉ)**
ูููุฐุฌ ููุซู ุณูุงูุฉ ูุญุฏุฏุฉ ูู ุงูุฏูุงุฌู:

```dart
Breed {
  id: String              // ูุนุฑู ูุฑูุฏ (cobb, ross, local_improved)
  name: String            // ุงุณู ุงูุณูุงูุฉ
  type: ProductionType    // ููุน ุงูุฅูุชุงุฌ (broiler/layer)
  avgDailyGain: double    // ูุชูุณุท ุงููุฒู ุงููููู (ููุญู)
  peakEggProduction: double // ุฐุฑูุฉ ุงูุฅูุชุงุฌ (ููุจูุถ)
  productionCycleDays: int  // ูุฏุฉ ุงูุฏูุฑุฉ
  nutritionRequirements: Map // ุงุญุชูุงุฌุงุช ุงูุชุบุฐูุฉ
}
```

**ุงูุณูุงูุงุช ุงููุนุฑูุฉ:**
- **ุงููุญู:** ููุจุ ุฑูุณุ ุณุงุณู
- **ุงูุจูุถ:** ุจูุฏู ูุญุณูุ ูููููุ ุฅูุฒุง ุจุฑุงูู

### 2. **CageBattery (ุงูุจุทุงุฑูุฉ/ุงูููุต)**
ููุซู ูุญุฏุฉ ุชุฑุจูุฉ ุฏุงุฎู ุงููุฒุฑุนุฉ:

```dart
CageBattery {
  id: String              // ูุนุฑู ูุฑูุฏ
  name: String            // ุงุณู ุงูุจุทุงุฑูุฉ (ุจุทุงุฑูุฉ 1ุ ุงูุฏูุฑ ุงูุฃูู)
  birdCount: int          // ุนุฏุฏ ุงูุทููุฑ
  cageArea: double        // ูุณุงุญุฉ ุงูุจุทุงุฑูุฉ (ูยฒ)
  
  // ุงูุญููู ุงููุญุณูุจุฉ
  stocking_density        // ุงููุซุงูุฉ = ุนุฏุฏ ุงูุทููุฑ / ุงููุณุงุญุฉ
  isDensitySafe           // ุงูุชุญูู ูู ุฃูุงู ุงููุซุงูุฉ (8-15 ุทุงุฆุฑ/ูยฒ)
}
```

### 3. **BatchConfig (ุฅุนุฏุงุฏ ุงูุฏูุฑุฉ)**
ูุญูุธ ุฌููุน ุฅุนุฏุงุฏุงุช ุฏูุฑุฉ ุงูุฅูุชุงุฌ:

```dart
BatchConfig {
  id: String              // ูุนุฑู ูุฑูุฏ ููุฏูุฑุฉ
  productionType: enum    // ููุน ุงูุฅูุชุงุฌ
  breedId: String         // ูุนุฑู ุงูุณูุงูุฉ
  startDate: DateTime     // ุชุงุฑูุฎ ุงูุจุฏุก
  initialAge: int         // ุงูุนูุฑ ุงูุฃููู (ุจุงูุฃูุงู)
  totalBirdCount: int     // ุฅุฌูุงูู ุงูุทููุฑ
  cages: List<CageBattery> // ูุงุฆูุฉ ุงูุจุทุงุฑูุงุช
  farmName: String        // ุงุณู ุงููุฒุฑุนุฉ
  notes: String           // ููุงุญุธุงุช ุฅุถุงููุฉ
  
  // ุงูุญููู ุงููุญุณูุจุฉ
  currentAgeInDays        // ุงูุนูุฑ ุงูุญุงูู
  isCycleComplete         // ูู ุงูุชูุช ุงูุฏูุฑุฉุ
  cycleProgress           // ูุณุจุฉ ุงูุชูุฏู (0.0-1.0)
  averageStockingDensity  // ูุชูุณุท ุงููุซุงูุฉ
}
```

### 4. **DailyRecord (ุงูุณุฌู ุงููููู)**
ูุญูุธ ุงูุจูุงูุงุช ุงููุณุฌูุฉ ููููุงู:

```dart
DailyRecord {
  id: String              // ูุนุฑู ูุฑูุฏ
  batchId: String         // ูุนุฑู ุงูุฏูุฑุฉ
  date: DateTime          // ุงูุชุงุฑูุฎ
  
  // ุจูุงูุงุช ุงููุญู
  averageWeight: double?  // ูุชูุณุท ุงููุฒู (ุฌุฑุงู)
  feedConsumption: double? // ุงุณุชููุงู ุงูุนูู (ููููุฌุฑุงู)
  
  // ุจูุงูุงุช ุงูุจูุถ
  eggProduction: int?     // ุนุฏุฏ ุงูุจูุถุงุช ุงููุฌูุนุฉ
  eggProductionPercentage: double? // ูุณุจุฉ ุงูุฅูุชุงุฌ %
  
  // ุจูุงูุงุช ุนุงูุฉ
  deadCount: int?         // ุนุฏุฏ ุงูุทููุฑ ุงููุงููุฉ
  notes: String           // ููุงุญุธุงุช
  
  // ุงูุญููู ุงููุญุณูุจุฉ
  feedConversionRatio     // ูุณุจุฉ ุงูุชุญููู ุงูุบุฐุงุฆู
}
```

---

## ๐๏ธ ุฎุฏูุฉ ุงูุชุฎุฒูู ุงููุญูู (LocalStorageService)

ุฎุฏูุฉ ุณููุฌูุชูู ูุฑูุฒูุฉ ูุฅุฏุงุฑุฉ ุฌููุน ุงูุนูููุงุช ุงููุชุนููุฉ ุจุญูุธ ูุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช.

### ุงููุฒุงูุง:
โ ุณููุฌูุชูู (ูุณุฎุฉ ูุงุญุฏุฉ ููุท)
โ ุฏุนู Hive ู SharedPreferences
โ ุนูููุงุช ุชุตููุฉ ูุชุฑุชูุจ ูููุฉ
โ ุญุณุงุจุงุช ุฅุญุตุงุฆูุฉ ูุฏูุฌุฉ
โ ุชุตุฏูุฑ ุงูุจูุงูุงุช ูู JSON

### ุงูุฏูุงู ุงูุฑุฆูุณูุฉ:

#### ุฅุฏุงุฑุฉ ุงูุฏูุฑุงุช:
```dart
saveBatchConfig(BatchConfig)      // ุญูุธ ุฏูุฑุฉ ุฌุฏูุฏุฉ
getBatchConfig(batchId)           // ุงูุญุตูู ุนูู ุฏูุฑุฉ
getAllBatchConfigs()              // ุฌููุน ุงูุฏูุฑุงุช
updateBatchConfig(BatchConfig)    // ุชุญุฏูุซ
deleteBatchConfig(batchId)        // ุญุฐู

setActiveBatchId(batchId)         // ุชุนููู ุงูุฏูุฑุฉ ุงููุดุทุฉ
getActiveBatchId()                // ุงูุญุตูู ุนูู ูุนุฑู ุงููุดุทุฉ
getActiveBatch()                  // ุงูุญุตูู ุนูู ุงูุฏูุฑุฉ ุงููุดุทุฉ
hasActiveBatch()                  // ุงูุชุญูู ูู ูุฌูุฏ ุฏูุฑุฉ ูุดุทุฉ
```

#### ุฅุฏุงุฑุฉ ุงูุณุฌูุงุช ุงูููููุฉ:
```dart
saveDailyRecord(DailyRecord)      // ุญูุธ ุณุฌู
getDailyRecord(recordId)          // ุงุณุชุฑุฌุงุน ุณุฌู
getDailyRecordsByBatch(batchId)   // ุฌููุน ุงูุณุฌูุงุช ูุฏูุฑุฉ
getLatestDailyRecord(batchId)     // ุฃุญุฏุซ ุณุฌู

updateDailyRecord(DailyRecord)    // ุชุญุฏูุซ ุณุฌู
deleteDailyRecord(recordId)       // ุญุฐู ุณุฌู
```

#### ุนูููุงุช ุฅุญุตุงุฆูุฉ:
```dart
getTotalFeedConsumption(batchId)  // ุฅุฌูุงูู ุงูุนูู
getTotalEggProduction(batchId)    // ุฅุฌูุงูู ุงูุจูุถ
getAverageWeight(batchId)         // ูุชูุณุท ุงููุฒู
getMortalityRate(batchId)         // ูุณุจุฉ ุงููููุงุช %
```

---

## ๐ฑ ุงูุดุงุดุงุช ูุงููุงุฌูุงุช

### 1๏ธโฃ ุดุงุดุฉ ุงูุฅุนุฏุงุฏ ุงูุฃููู (BatchSetupScreen)

**ุงููุธุงุฆู:**
- ุงุฎุชูุงุฑ ููุน ุงูุฅูุชุงุฌ (ูุญู/ุจูุถ)
- ุงุฎุชูุงุฑ ุงูุณูุงูุฉ (ุฏููุงูููู ุญุณุจ ุงูููุน)
- ุฅุฏุฎุงู ุงูุนูุฑ (ุจุงูุฃูุงู ุฃู ุงูุฃุณุงุจูุน)
- ุชุญุฏูุฏ ุนุฏุฏ ุงูุทููุฑ
- ุฅุถุงูุฉ ุงูุจุทุงุฑูุงุช/ุงูุฃููุงุต
- ูุนูููุงุช ุฅุถุงููุฉ (ุงุณู ุงููุฒุฑุนุฉุ ููุงุญุธุงุช)

**ุงูุชุญูู ูู ุงูุตุญุฉ:**
โ ูู ุงูุญููู ุงููุทููุจุฉ ููููุกุฉ
โ ุงูุฃููุงุต ุชุบุทู ุงูุนุฏุฏ ุงูููู
โ ุงููุซุงูุฉ ุขููุฉ (8-15 ุทุงุฆุฑ/ูยฒ)

**ุงูุญูุธ:**
- ุชุฎุฒูู ูุญูู via Hive
- ุชุนููู ูุฏูุฑุฉ ูุดุทุฉ
- ุงูุงูุชูุงู ูุตูุญุฉ ููุญุฉ ุงูุชุญูู

---

### 2๏ธโฃ ููุญุฉ ุงูุชุญูู (DashboardScreen)

ุชุชุบูุฑ ุงููุงุฌูุฉ ุจูุงุกู ุนูู ููุน ุงูุฅูุชุงุฌ:

#### ุฃ) ูุญู (Broiler):
**ุงููุคุดุฑุงุช ุงููุนุฑูุถุฉ:**
- ๐ ูุนูููุงุช ุงูุฏูุฑุฉ (ุงูุณูุงูุฉุ ุงูุนูุฑุ ุงูุชูุฏู)
- โ๏ธ ููุงุฑูุฉ ุงููุฒู (ุงูุญุงูู vs ุงููุชููุน)
- ๐พ ุงุณุชููุงู ุงูุนูู (ุงูุฅุฌูุงููุ ููู ุทุงุฆุฑุ ูููู)
- ๐ ูุนุฏู ุงููููุงุช
- โ๏ธ ุชูุจููุงุช ุตุญูุฉ

**ุงูุฎูุงุฑุฒููุงุช:**
- ุญุณุงุจ ุงููุฒู ุงููุชููุน = ูุชูุณุท ุงููุฒู ุงููููู ร ุงูุนูุฑ
- ูุณุจุฉ ุงููุฑู = (ุงููุฒู ุงูุญุงูู - ุงููุชููุน) / ุงููุชููุน ร 100
- ุชูุจูู ุฅุฐุง ูุงู ุงููุฒู ุฃูู ูู 90% ูู ุงููุชููุน
- ุชูุจูู ุฅุฐุง ูุงูุช ุงููููุงุช > 5%

#### ุจ) ุจูุถ (Layer):
**ุงููุคุดุฑุงุช ุงููุนุฑูุถุฉ:**
- ๐ ูุนูููุงุช ุงูุฏูุฑุฉ
- ๐ฅ ุฅุฌูุงูู ุงูุจูุถ ุงููุฌูุน
- ๐ ูุชูุณุท ุงูุฅูุชุงุฌ ุงููููู (%)
- ๐ ุจูุถุฉ ููู ุฏุฌุงุฌุฉ

---

## ๐พ ุชุฏูู ุญูุธ ุงูุจูุงูุงุช

```
ุงููุณุชุฎุฏู ูููุฃ ุงูุฅุนุฏุงุฏุงุช
        โ
ุงูุชุญูู ูู ุงูุตุญุฉ
        โ
[ุตุญูุญ] โ  โ  ุญูุธ ูู Hive
              โ
         ุชุนููู ูู Active
              โ
         ุงูุงูุชูุงู ููู Dashboard
         
[ุฎุทุฃ] โ  โ  ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ
             โ
         ุทูุจ ูู ุงููุณุชุฎุฏู ุงูุชุตุญูุญ
```

---

## ๐ ุงูุชูุงูู ุงูุชููู

### ุงูููุชุจุงุช ุงููุณุชุฎุฏูุฉ:

| ุงูููุชุจุฉ | ุงูุฅุตุฏุงุฑ | ุงูุงุณุชุฎุฏุงู |
|--------|--------|-----------|
| hive | 2.2.3 | ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญููุฉ |
| hive_flutter | 1.1.0 | ุชููุฆุฉ Hive ูู Flutter |
| shared_preferences | 2.2.0 | ุชุฎุฒูู ุงูุจูุงูุงุช ุงูุจุณูุทุฉ |
| uuid | 4.0.0 | ุชูููุฏ ูุนุฑูุงุช ูุฑูุฏุฉ |
| intl | 0.19.0 | ูุนุงูุฌุฉ ุงูุชุงุฑูุฎ ูุงูููุช |
| provider | 6.0.0 | ุฅุฏุงุฑุฉ ุงูุญุงูุฉ (ูุฑูุจ) |

### ูุซุงู ุนูู ุงูุชููุฆุฉ:

```dart
void main() async {
  WidgetsFlutterBinding.ensureInitialized();

  // ุชููุฆุฉ Hive
  await Hive.initFlutter();
  
  // ุชุณุฌูู ุงูุฃููุงุน ุงููุฎุตุตุฉ
  Hive.registerAdapter(BatchConfigAdapter());
  Hive.registerAdapter(DailyRecordAdapter());
  // ...

  // ุชููุฆุฉ ุงูุฎุฏูุฉ
  final storageService = LocalStorageService();
  await storageService.init();

  runApp(MyApp(storageService: storageService));
}
```

---

## ๐ ุฎุทูุงุช ุงูุชูููุฐ

### ุงููุฑุญูุฉ 1: ุงูุฅุนุฏุงุฏ ุงูุฃุณุงุณู
1. ุฅูุดุงุก ูุดุฑูุน Flutter ุฌุฏูุฏ
2. ุฅุถุงูุฉ ุงูููุชุจุงุช ุฅูู pubspec.yaml
3. ุชูููุฐ ููุงุฐุฌ ุงูุจูุงูุงุช
4. ุชููุฆุฉ Hive adapters

### ุงููุฑุญูุฉ 2: ุฎุฏูุฉ ุงูุชุฎุฒูู
1. ุชูููุฐ LocalStorageService
2. ุงุฎุชุจุงุฑ ุงูุนูููุงุช ุงูุฃุณุงุณูุฉ
3. ุฅุถุงูุฉ ุนูููุงุช ุฅุญุตุงุฆูุฉ

### ุงููุฑุญูุฉ 3: ุงููุงุฌูุงุช
1. ุชูููุฐ BatchSetupScreen
2. ุชูููุฐ DashboardScreen (Broiler + Layer)
3. ุงูุงุฎุชุจุงุฑ ุงูุดุงูู

### ุงููุฑุญูุฉ 4: ุงูููุฒุงุช ุงูุฅุถุงููุฉ
1. ุดุงุดุฉ ุงูุณุฌู ุงููููู
2. ุงูุฑุณูู ุงูุจูุงููุฉ ูุงูุฅุญุตุงุฆูุงุช
3. ุงูุชูุงุฑูุฑ ูุงูุชุตุฏูุฑ
4. ุงูุฎุทุท ุงูุบุฐุงุฆูุฉ

---

## ๐งช ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ุฅูุดุงุก ุฏูุฑุฉ ุฌุฏูุฏุฉ:

```dart
final batch = BatchConfig(
  id: const Uuid().v4(),
  productionType: ProductionType.broiler,
  breedId: 'cobb',
  startDate: DateTime.now(),
  initialAge: 0,
  totalBirdCount: 1000,
  cages: [
    CageBattery(
      id: '1',
      name: 'ุจุทุงุฑูุฉ 1',
      birdCount: 500,
      cageArea: 50,
    ),
    CageBattery(
      id: '2',
      name: 'ุจุทุงุฑูุฉ 2',
      birdCount: 500,
      cageArea: 50,
    ),
  ],
  farmName: 'ูุฒุฑุนุชู',
);

await storageService.saveBatchConfig(batch);
```

### ุชุณุฌูู ุณุฌู ูููู:

```dart
final record = DailyRecord(
  id: const Uuid().v4(),
  batchId: batch.id,
  date: DateTime.now(),
  averageWeight: 2500.0, // ููุญู
  feedConsumption: 45.5,
  deadCount: 2,
  notes: 'ุตุญุฉ ุฌูุฏุฉ',
);

await storageService.saveDailyRecord(record);
```

### ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช:

```dart
// ุงูุฏูุฑุฉ ุงููุดุทุฉ
final activeBatch = storageService.getActiveBatch();

// ุฌููุน ุงูุณุฌูุงุช ูุฏูุฑุฉ
final records = storageService.getDailyRecordsByBatch(activeBatch!.id);

// ุงูุฅุญุตุงุฆูุงุช
final feedTotal = storageService.getTotalFeedConsumption(activeBatch.id);
final mortality = storageService.getMortalityRate(activeBatch.id);
```

---

## ๐ ุญุณุงุจุงุช ูููุฉ

### ููุญู (Broiler):

```
ุงููุฒู ุงููุชููุน = ูุชูุณุท ุงููุฒู ุงููููู ร ุงูุนูุฑ ุจุงูุฃูุงู
ูุณุจุฉ ุงููุฑู = (ุงููุฒู ุงูุญุงูู - ุงููุชููุน) / ุงููุชููุน ร 100
ูุณุจุฉ ุงูุชุญููู = ุงุณุชููุงู ุงูุนูู / ุงููุฒู ุงูููุชุณุจ
ูุนุฏู ุงููููุงุช = (ุนุฏุฏ ุงููุงูู / ุงูุฅุฌูุงูู) ร 100
```

### ููุจูุถ (Layer):

```
ุฅุฌูุงูู ุงูุฅูุชุงุฌ = ูุฌููุน ุงูุจูุถ ุงููุฌูุน ููููุงู
ุงูุฅูุชุงุฌ ููู ุฏุฌุงุฌุฉ = ุฅุฌูุงูู ุงูุจูุถ / ุนุฏุฏ ุงูุฏุฌุงุฌ
ูุณุจุฉ ุงูุฅูุชุงุฌ % = (ุนุฏุฏ ุงูุจูุถ / ุนุฏุฏ ุงูุฏุฌุงุฌ) ร 100
ูุนุฏู ุงููููุงุช = (ุนุฏุฏ ุงููุงูู / ุงูุฅุฌูุงูู) ร 100
```

---

## ๐ ุฃูุงู ุงูุจูุงูุงุช

- โ ุชุดููุฑ Hive ุงุฎุชูุงุฑู
- โ ูุง ุชูุฌุฏ ุจูุงูุงุช ุญุณุงุณุฉ ุนูู ุงูุฅูุชุฑูุช
- โ ูุณุฎ ุงุญุชูุงุทูุฉ ูุญููุฉ
- โ ุชุตุฏูุฑ/ุงุณุชูุฑุงุฏ JSON

---

## ๐ ุงููููุฒุงุช ุงููุฎุทุท ููุง

- [ ] ุดุงุดุฉ ุชุณุฌูู ุงูุจูุงูุงุช ุงูููููุฉ
- [ ] ุฑุณูู ุจูุงููุฉ ุฏููุงููููุฉ
- [ ] ุชูุจููุงุช ูุฅุดุนุงุฑุงุช
- [ ] ุฎุทุท ุบุฐุงุฆูุฉ ูุฎุตุตุฉ
- [ ] ุชูุงุฑูุฑ ุดุงููุฉ
- [ ] ูุฒุงููุฉ ุณุญุงุจูุฉ
- [ ] ุฏุนู ูุชุนุฏุฏ ุงููุณุชุฎุฏููู

---

## ๐ค ุงููุณุงููุฉ ูุงูุฏุนู

ูููุณุงููุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงููุ ูุฑุฌู ุงูุชูุงุตู.

---

**ุขุฎุฑ ุชุญุฏูุซ:** ููุงูุฑ 2026
**ุงูุฅุตุฏุงุฑ:** 1.0.0
